\mode<presentation>

\DeclareOptionBeamer{location}{\def\beamer@SURFsara@location{#1}}
\DeclareOptionBeamer{logo}{\def\beamer@SURFsara@logo{#1}}
\ProcessOptionsBeamer

% Set the background of the frames
\setbeamertemplate{background}{
    \begin{tikzpicture}
        % Don't stray outside the paper dimentions.
        \useasboundingbox (0, 0) rectangle(\the\paperwidth, \the\paperheight);
        \fill[white!93!black, opacity=1] (0, 0) rectangle(\the\paperwidth, \the\paperheight);
        \ifnum\thepage=1\relax%
            \fill[color=SURFsaraGreen] (0, 0) rectangle(2.9cm, \the\paperheight);
        \fi
        % Use the below background when it is not the title page.
        \ifnum\thepage>1\relax%
            % Set a solid bar at the top of the frame which holds the frame title
            \fill[color=SURFsaraGreen] (0, \the\paperheight - 1.5cm) rectangle(\the\paperwidth, \the\paperheight);
            % Set a small three coloured bar at the bottom of the frame
            % Draw the right most first and slightly larger then 1/3 of the paperwidth
            \filldraw[color=SURFsaraGreenLight] (2*\the\paperwidth/3 - 0.3cm, 0) rectangle(\the\paperwidth, 0.32);
            \filldraw[color=SURFsaraGreen] (\the\paperwidth/3 - 0.3cm, 0) -- (2*\the\paperwidth/3 - 0.15cm, 0) -- (2*\the\paperwidth/3, 0.16) -- (2*\the\paperwidth/3 - 0.15cm, 0.32) -- (\the\paperwidth/3 - 0.3cm, 0.32) -- (\the\paperwidth/3 - 0.3cm, 0);
            \filldraw[color=SURFsaraGreenDark] (0, 0) -- (\the\paperwidth/3 - 0.15cm, 0) -- (\the\paperwidth/3, 0.16) -- (\the\paperwidth/3 - 0.15cm, 0.32) -- (0, 0.32) -- (0, 0);
        \fi
    \end{tikzpicture}
}

% Define where the element of the title page are placed
\defbeamertemplate*{title page}{SURFsara}[1][]
{
    \vskip3cm%
    \inserttitlegraphic
    \begin{beamercolorbox}[wd=12cm, leftskip=2.8cm, #1]{title page header}
        \usebeamerfont*{title}\inserttitle
    \end{beamercolorbox}
    \vskip0.1cm%
    \begin{beamercolorbox}[wd=12cm, leftskip=2.8cm, #1]{title page header}
        \usebeamerfont*{subtitle}\insertsubtitle
    \end{beamercolorbox}
    \vskip0.8cm%
    \begin{beamercolorbox}[wd=12cm, leftskip=2.8cm, #1]{author}
        \usebeamerfont*{author}\insertauthor
    \end{beamercolorbox}
    \vskip-0.75ex%
    \begin{beamercolorbox}[wd=12cm, leftskip=2.8cm, #1]{institute}
        \usebeamerfont*{institute}\insertinstitute
    \end{beamercolorbox}
    \vskip1.75cm%
    \begin{beamercolorbox}[wd=16cm, #1]{date}
        \hskip2.8cm\relax\hfill\usebeamerfont*{date}\insertdate\hfill\null

        \ifdefined\beamer@SURFsara@location
            \hskip2.8cm\relax\hfill\texttt{\fontseries{m}\selectfont\scriptsize\beamer@SURFsara@location}\hfill\null
        \fi
    \end{beamercolorbox}
    \vskip6.5mm%

    \ifdefined\beamer@SURFsara@logo
        \hskip2.8cm\hfill\includegraphics[height=6.5mm]{\beamer@SURFsara@logo}\hfill\null
    \else
        \hskip2.8cm\hfill\includegraphics[height=6.5mm]{graphics/logos/SURF_SARA_fc.pdf}\hfill\null
    \fi
}

\mode<all>
